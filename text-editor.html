<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
     <link href="https://fonts.googleapis.com/css?family=Space+Mono" rel="stylesheet">
  </head>
  <body>
    <div id='toolbar'>
      <h5>HTML/JS In-Browser Editor
      <input type='submit' id='exit' value='Exit'></input>
      <input type='submit' id='save' value='Save'></input>
      <input type='submit' id='preview' value='Preview' onClick="genPre()"></input>
    </h5>
    </div>
    <div id='editordiv'>
      <textarea cols='100' rows='35' id='editor'></textarea>
      <!--<canvas height='500' width='5000' id='editor'></canvas>
      <script>
        var text = ""
        var editor = document.getElementById('editor');
        var ctx = editor.getContext('2d');
        var col = 1;
        var lettersize = 11;
        document.onkeypress = function(evt)
        {
          console.log(String.fromCharCode(evt.which));
          text += String.fromCharCode(evt.which);
          atext = text.split("");
          ctx.font="12px 'Space Mono', monospace";
          ctx.fillStyle ='white';
          ctx.fillRect(0,0,500,500);
          for (var i=0;i<atext.length;i++)
          {
            if (atext[i] == 'var')
            {
              ctx.fillStyle='#cb37d3';
              ctx.fillText(atext[i],i*lettersize,col*lettersize);
            }
            else
            {
              ctx.fillStyle='#000000';
              ctx.fillText(atext[i],i*lettersize,col*lettersize);
            }
          }
        }
      </script>-->
    </div>
    <hr>
    <div id='previewdiv'>
      <p>Click the preview button to generate a preview of how it will look down here, note that variable subsitution is not supported in the preview</p>
    </div>
    <script>
    var div = document.createElement("div");
    function genPre()
    {
      // delete old preview
      var pre = document.getElementById('previewdiv');
      var doc = document.getElementById('editor');
      div.style.width = "100%";
      div.style.height = "500px";
      div.id="preview";
      div.innerHTML = doc.value;
      pre.appendChild(div);
      //pre.removeChild(document.getElementById('preview'));
      //alert(pre.innerHTML);
    }
    </script>
  </body>
</html>
